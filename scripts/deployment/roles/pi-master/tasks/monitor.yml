---
# This Playbook runs monitoring tasks for a coordinator

- name: Remove older log
  file:
    path: "/home/ubuntu/dimitrios/{{ coord_bin_name }}-sysStat.csv"
    state: absent

- name: Start dool monitoring
  shell: |
    nohup taskset -c 0 /home/ubuntu/git/{{ dool_name }}/{{ dool_name }} -tTcm -C 1,2,3 --net -N eth0 --output /home/ubuntu/dimitrios/{{ ansible_hostname }}-sysStat.csv > /dev/null 2>&1 &

- name: Coordinator monitoring log is created
  wait_for:
    path: "/home/ubuntu/dimitrios/{{ coord_bin_name }}-sysStat.csv"
