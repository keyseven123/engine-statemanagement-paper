# name: projection/Projection.test
# description: Simple map tests with an add function
# groups: [Projection]

Source stream UINT64 id UINT64 value UINT64 timestamp

Attach stream CONFIG/sources/file_manual_path.yaml

# put inline into config?
# How to integrate different types of sources?
# TCP
# MQTT
# Video
# Audio
# Sensor (heat, cpu)
# DataGenerator
#
# Idea: Adaptors (Server)
#   Buffer adaptor
#       - implements interface that takes buffer and, upon connection from client, serves bytes
#   Generator adaptor
#       - implements interface that takes configuration and, upon connection from client, serves bytes, based on config
#       - could model as buffer adaptor by writing config into buffer, but is hacky
#       - could model both as configuration, optional(data) pair
#           - configuration as part of CONFIG/sources/...config?
# Idea: Registry for 'Servers/Adaptors'
#   - provide {sourceType, adaptorType}, e.g., {File, INTERNAL}
#   - get adaptor if available
#   - provide arguments to adaptor
Attach stream CONFIG/sources/file_default.yaml FileSourceInline
5|19|19000
6|20|20000
7|21|21000

SINK sinkId UINT64 stream$id

# 0: [id]
SELECT id FROM stream INTO sinkId
----
1
2
3
4
5
6
7
